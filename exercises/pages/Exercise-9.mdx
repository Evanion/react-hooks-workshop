---
name: Ex. 9 - Internationalization
order: 9
---

# Ex. 9 - Internationalization

## Instructions

We now want to translate our application and give the user the opportunity to change the language live.

- Create a folder `src/locales` with two files `en.json` and `fr.json` (see help)
- Create a `src/components/I18n.js` file that will expose:
  - `I18nProvider`
  - `useI18n`
  - `useT`
  - `T`
- Add `I18nProvider` in `index.js`
- Modify `SearchInput` to get the placeholder via `useT`
- Change `App` and add a button to change the language and translate the title of the application

### Expected result

A button appears allowing me to change the language of the application.

<iframe
  src="https://codesandbox.io/embed/github/smooth-code/react-hooks-workshop/tree/end-exercise-9/?fontsize=14&view=preview"
  style={{
    width: '100%',
    height: 500,
    border: 0,
    borderRadius: 4,
    overflow: 'hidden',
  }}
  sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"
/>

## Help

### I18n.js

```js
// I18n.js
import React, { createContext, useState, useContext, useMemo } from 'react'

// I18n context, it's private
const I18nContext = createContext()

// A provider
export function I18nProvider({ translations, defaultLocale, children }) {
  // TODO: with the help of "useState", create a value to inject in the context.
  // The object will have the following keys: `translations`, `locale` and `setLocale`.
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
}

// A collector
export function useT(id) {
  // TODO: With the help of "useContext", collect the translations for the key "id"
}

// A simple component to render a translation key
export function T({ id }) {
  return useT(id)
}

// Hook permettant de rÃ©cupÃ©rer le contexte i18n
export function useI18n() {
  return useContext(I18nContext)
}
```

### Branchement du I18nProvider

```js
// index.js
import React from 'react'
import ReactDOM from 'react-dom'
import './index.css'
import App from './App'
import Catch from './components/Catch'
import { I18nProvider } from './components/I18n'
import * as serviceWorker from './serviceWorker'
import en from './locales/en.json'
import fr from './locales/fr.json'

ReactDOM.render(
  <Catch>
    <I18nProvider translations={{ en, fr }} defaultLocale="en">
      <App />
    </I18nProvider>
  </Catch>,
  document.getElementById('root'),
)

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://bit.ly/CRA-PWA
serviceWorker.unregister()
```

### Locales

**en.json**

```json
{
  "fr": "ðŸ‡«ðŸ‡· FranÃ§ais",
  "en": "ðŸ‡¬ðŸ‡§ English",
  "title": "Smooth Movies",
  "placeholder": "Type something..."
}
```

**fr.json**

```json
{
  "fr": "ðŸ‡«ðŸ‡· FranÃ§ais",
  "en": "ðŸ‡¬ðŸ‡§ English",
  "title": "Smooth Films",
  "placeholder": "Tapez quelque chose..."
}
```
