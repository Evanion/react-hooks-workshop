---
name: Ex. 9 - I18N
order: 9
---

# Ex. 9 - I18N

## Instructions

Nous souhaitons maintenant traduire notre application et donner la possibilitÃ© Ã  l'utilisateur de changer la langue en live.

- CrÃ©er un dossier `src/locales` avec deux fichiers `en.json` et `fr.json` (voir aide)
- CrÃ©er un fichier `src/components/I18n.js` qui exposera :
  - `I18nProvider`
  - `useI18n`
  - `useT`
  - `T`
- Ajouter `I18nProvider` dans `index.js`
- Modifier `SearchInput` afin de rÃ©cupÃ©rer le placeholder via `useT`
- Modifier `App` et ajouter un bouton pour changer la langue et traduire le titre de l'application

### RÃ©sultat attendu

Un bouton s'affiche me permettant de changer la langue de l'application.

<img src="/public/ex-9.png" width="100%" alt="RÃ©sultat" />

## Aide

### I18n

```js
// I18n.js
import React, { createContext, useState, useContext, useMemo } from 'react'

const I18nContext = createContext()

export function I18nProvider({ translations, defaultLocale, children }) {
  // TODO: Ã  l'aide de "useState", crÃ©er la valeur injectÃ©e dans le contexte.
  // Elle contiendra : `translations`, `locale` et `setLocale`.
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
}

export function useT(id) {
  // TODO: Ã  l'aide de "useContext", rÃ©cupÃ©rer la traduction correspondante Ã  "id"
}

export function T({ id }) {
  return useT(id)
}

export function useI18n() {
  return useContext(I18nContext)
}
```

### Branchement du I18nProvider

```js
// index.js
import React from 'react'
import ReactDOM from 'react-dom'
import './index.css'
import App from './App'
import Catch from './components/Catch'
import { I18nProvider } from './components/I18n'
import * as serviceWorker from './serviceWorker'
import en from './locales/en.json'
import fr from './locales/fr.json'

ReactDOM.render(
  <Catch>
    <I18nProvider translations={{ en, fr }} defaultLocale="en">
      <App />
    </I18nProvider>
  </Catch>,
  document.getElementById('root'),
)

// If you want your app to work offline and load faster, you can change
// unregister() to register() below. Note this comes with some pitfalls.
// Learn more about service workers: https://bit.ly/CRA-PWA
serviceWorker.unregister()
```

### Locales

**en.json**

```json
{
  "fr": "ðŸ‡«ðŸ‡· French",
  "en": "ðŸ‡¬ðŸ‡§ English",
  "title": "Smooth Movies",
  "placeholder": "Type something..."
}
```

**fr.json**

```json
{
  "fr": "ðŸ‡«ðŸ‡· FranÃ§ais",
  "en": "ðŸ‡¬ðŸ‡§ Anglais",
  "title": "Smooth Films",
  "placeholder": "Tapez quelque chose..."
}
```
