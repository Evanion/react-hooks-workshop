---
name: Ex. 3 - Data Fetching
order: 3
---

# Ex. 3 - Data Fetching

## Instructions

Nous allons désormais récupérer les données depuis l'[API de TheMovieDB](https://developers.themoviedb.org/3). Une clef d'API a déjà été créée, nous pourrons donc nous concentrer sur la partie applicative.

Pour fetcher les données, nous utiliserons la librairie [axios](https://github.com/axios/axios), cela permet de faire des requêtes HTTP de façon simple et d'assurer une compatibilité sur tous les navigateurs.

- Installer `axios`
- A l'aide de `useEffect`, `useState` et `axios` récupérer les données depuis l'API

### Résultat attendu

Lorsque l'utilisateur tape dans le champs de recherche, la liste de films correspondants s'affiche.

<iframe
  src="https://codesandbox.io/embed/github/smooth-code/react-hooks-workshop/tree/end-exercise-3/?fontsize=14&view=preview"
  style={{
    width: '100%',
    height: 500,
    border: 0,
    borderRadius: 4,
    overflow: 'hidden',
  }}
  sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"
/>

## Aide

### Utilisation de l'API avec axios

```js
axios
  .get('https://api.themoviedb.org/3/search/movie', {
    params: {
      api_key: 'c5742978852b8f695a61e22a33a8196c',
      query: 'Lord of the Rings',
    },
  })
  .then(res => {
    console.log(res.data)
  })
```

### App.js

```js
// App.js
import React, { useState, useEffect } from 'react'
import { Normalize, Grid, Typography } from '@smooth-ui/core-sc'
import axios from 'axios'
import SearchInput from './components/SearchInput'

export default function App() {
  const [query, setQuery] = useState('Lord of the Rings')
  /* TODO: créer un state pour les films */

  useEffect(
    () => {
      /* TODO: faire la requête */
    },
    [
      /* TODO: spécifier les dépendances nécessaires */
    ],
  )

  return (
    <>
      <Grid py={200}>
        <Normalize />
        <Typography variant="display-1">Smooth Movie</Typography>
        <SearchInput
          value={query}
          onChange={event => setQuery(event.target.value)}
        />
        {/* TODO: afficher la liste des films */}
      </Grid>
    </>
  )
}
```
